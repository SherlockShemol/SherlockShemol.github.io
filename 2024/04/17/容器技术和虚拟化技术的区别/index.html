<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author"><title>容器技术和虚拟化技术的区别 · Shemol's Blog</title><meta name="description" content="容器化技术和虚拟化技术都是用于将应用程序与底层基础设施隔离的技术。它们都具有提高资源利用率、简化应用程序部署和管理等优势。两者的主要区别在于虚拟化技术是在硬件层进行虚拟化，而容器化技术是在操作系统层进行虚拟化。虚拟化技术通过创建一个虚拟机 (VM) 来实现虚拟化。VM是一个软件程序，它模拟物理计算机"><meta name="og:description" content="容器化技术和虚拟化技术都是用于将应用程序与底层基础设施隔离的技术。它们都具有提高资源利用率、简化应用程序部署和管理等优势。两者的主要区别在于虚拟化技术是在硬件层进行虚拟化，而容器化技术是在操作系统层进行虚拟化。虚拟化技术通过创建一个虚拟机 (VM) 来实现虚拟化。VM是一个软件程序，它模拟物理计算机"><meta name="twitter:site" content="Shemol's Blog"><meta name="twitter:title" content="容器技术和虚拟化技术的区别"><meta name="twitter:card" content="summary"><meta name="keywords" content=""><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="images/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/bootstrap.min.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="stylesheet" href="/css/style.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"><meta name="generator" content="Hexo 7.3.0"><link rel="stylesheet" href="/css/prism.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head><body><div class="container" id="stage"><div class="row"><div class="col-sm-3 col-xs-12 side-container invisible" id="side-bar"><div class="vertical-text site-title"><h3 class="site-title-small" tabindex="-1"><a class="a-title" href="/">Shemol's Blog</a></h3><h1 class="site-title-large" tabindex="-1"><a class="a-title" href="/"></a></h1><!--h6(onclick="triggerSiteNav()") Trigger--></div><br class="visible-lg visible-md visible-sm"><div class="site-title-links" id="site-nav"><ul><li><a href="/">Home</a></li><li><a href="/archives">Archive</a></li><li><a href="/tags">Tags</a></li><li><a href="/friends/index.html">friends</a></li><li><a href="/about/index.html">about</a></li><li class="soc"></li></ul><div class="visible-lg visible-md visible-sm site-nav-footer"><br class="site-nav-footer-br"><footer><p>&copy;&nbsp;2024&nbsp;<a target="_blank" href="https://shemol.tech" rel="noopener noreferrer">Shemol</a></p><p>Theme&nbsp;<a target="_blank" href="https://github.com/SumiMakito/hexo-theme-typography" rel="noopener noreferrer">Typography</a>&nbsp;by&nbsp;<a target="_blank" href="https://www.keep.moe" rel="noopener noreferrer">Makito</a></p><p>Proudly published with&nbsp;<a target="_blank" href="https://hexo.io" rel="noopener noreferrer">Hexo</a></p></footer></div></div></div><div class="col-sm-9 col-xs-12 main-container invisible" id="main-container"><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post-container"><p class="post-title"><a>容器技术和虚拟化技术的区别</a></p><p class="post-meta"><span class="date meta-item">Posted at&nbsp;2024-04-17</span><span class="meta-item"><i class="fa fa-tag"></i><span>&nbsp;</span><a class="a-tag" href="/tags/笔记/" title="笔记">笔记</a><span>&nbsp;</span><a class="a-tag" href="/tags/Cloud-Native/" title="Cloud_Native">Cloud_Native</a><span>&nbsp;</span></span></p><p class="post-abstract"><p>容器化技术和虚拟化技术都是用于将应用程序与底层基础设施隔离的技术。<span id="more"></span>它们都具有提高资源利用率、简化应用程序部署和管理等优势。两者的主要区别在于虚拟化技术是在硬件层进行虚拟化，而容器化技术是在操作系统层进行虚拟化。虚拟化技术通过创建一个虚拟机 (VM) 来实现虚拟化。VM是一个软件程序，它模拟物理计算机。VM拥有自己的操作系统、CPU、内存、存储和网络资源。而容器化技术通过创建一个容器来实现虚拟化。容器是一个轻量级的虚拟化环境，它共享主机的操作系统内核。容器包含应用程序代码、运行时环境和依赖项等。</p>
<h1 id="架构分析"><a href="#架构分析" class="headerlink" title="架构分析"></a>架构分析</h1><p><img src="/img/cont-1.png"><br>虚拟化技术通过Hypervisor实现虚拟机与底层硬件的解耦，虚拟机实现依赖Hypervisor层。Hypervisor也可以叫作虚拟机监视器 VMM（Virtual Machine Monitor）是一种运行在基础物理服务器和操作系统之间的中间软件层，可允许多个操作系统和应用共享硬件。Hypervisor虚拟机可以模拟机器硬件资源，协调虚拟机对硬件资源的访问，同时在各个虚拟机之间进行隔离。每一个虚拟机都包括执行的应用，依赖的二进制和库资源，以及一个完整的操作系统，虚拟机运行以后，预分配给它的资源将全部被占用。<br>容器不同于VM，容器只包含应用程序及依赖库，为应用程序提供了隔离的运行空间，容器之间共享同一个上层操作系统内核，容器技术的核心是如何实现容器内资源的限制，以及不同容器之间的隔离，这些是基于 Linux 的 Namespace 和 CGroups 技术。<br><img src="/img/cont-1.png"></p>
<p>Namespace 的目的是通过抽象方法使得Namespace中的进程看起来拥有它们自己的隔离的全局系统资源实例。<br>Linux 内核实现了六种Namespace：Mount namespaces、UTS namespaces、IPC namespaces、PID namespaces、Network namespaces、User namespaces，功能分别为：隔离文件系统、定义 主机名称和域名名称、特定的进程间通信资源、独立进程ID结构、独立网络设备、用户和组ID空间。<br>以容器化技术的代表Docker为例，Docker在创建一个容器的时候，会创建以上六种Namespace实例，然后将隔离的系统资源放入到相应的Namespace中，使得每个容器只能看到自己独立的系统资源。<br>Docker 利用 CGroups 进行资源隔离。CGroups（Control Groups）也是 Linux 内核中提供的一种机制，它的功能主要是限制、记录、隔离进程所使用的物理资源，比如 CPU、Mermory、IO、Network 等。简单来说，CGroups 在接收到调用时，会给指定的进程挂上钩子，这个钩子会在资源被使用的时候触发，触发时会根据资源的类别，比如 CPU、Mermory、IO等，然后使用对应的方法进行限制。<br>CGroups 中有一个术语叫作子系统（Subsystem），也就是一个资源调度控制器，CPU子系统负责CPU的时间分配，内存子系统负责内存的使用量等。Docker启动一个容器后，会在 &#x2F;sys&#x2F;fs&#x2F;cgroup目录下生成带有此容器ID的文件夹，文件夹中就是调用CGroups的配置文件，从而实现通过CGroups限制容器的资源使用率。</p>
<h1 id="隔离性方面"><a href="#隔离性方面" class="headerlink" title="隔离性方面"></a>隔离性方面</h1><p>虚拟化技术通过虚拟机管理程序（如VMware或KVM）在物理硬件上创建完整的虚拟机，每个虚拟机都拥有自己的操作系统和应用程序，实现了硬件级别的完全隔离，但管理复杂性较高。而容器化技术（如Docker）则在操作系统级别进行隔离，多个容器共享同一宿主机的操作系统和内核，但各自运行独立的应用程序和服务，提供轻量级、高效的应用程序封装方式，更适合快速部署和管理。</p>
<h1 id="性能开销与资源专用"><a href="#性能开销与资源专用" class="headerlink" title="性能开销与资源专用"></a>性能开销与资源专用</h1><p>由于容器不需要额外的操作系统载入，它们的启动速度快，资源消耗小，这使得容器化技术在性能开销方面优于传统的虚拟化技术。虚拟化技术的每个虚拟机都需要运行一个完整的操作系统，这会带来更高的资源使用率和启动时间，也可能会导致资源浪费。</p>
<h1 id="适用场景"><a href="#适用场景" class="headerlink" title="适用场景"></a>适用场景</h1><p>虚拟化技术适用于需要高度隔离和安全性的场景，例如数据中心、云计算和服务器托管等。容器化技术则更适合于轻量级、快速开发和部署应用程序的场景，如Web服务器和微服务架构、持续集成&#x2F;持续部署（CI&#x2F;CD）等。由于其轻量级、快速启动和可移植性等特点，容器化技术在现代DevOps实践中非常流行。</p>
<h1 id="管理和监控"><a href="#管理和监控" class="headerlink" title="管理和监控"></a>管理和监控</h1><p>虚拟机的管理和监控通常由专门的工具和平台（如OpenStack）处理，提供了丰富的管理和监控功能。容器化技术的管理和监控可以通过容器编排工具（如Kubernetes）来实现，这些工具专为容器化工作负载设计，提供了自动化部署、扩展和运维的功能。</p>
<p>虚拟化技术提供了更强的隔离性和更广泛的操作系统支持，适合于需要高度隔离和特定操作系统环境的场合。而容器化技术以其轻量级、快速和一致性的特点，更适合于现代的云环境和微服务架构。随着技术的发展，这两种技术也在不断融合和优化， 实际部署一般是把两种技术结合起来，在一个虚拟机中运行多个容器，这样既保证了较好的强隔离性和安全性，也有了快速扩展、灵活性和易用性。</p>
</p></div><div class="share"><span>Share</span>&nbsp;<span class="soc"><a class="fa fa-bookmark" href="javascript:(function(){EN_CLIP_HOST='http://www.evernote.com';try{var%20x=document.createElement('SCRIPT');x.type='text/javascript';x.src=EN_CLIP_HOST+'/public/bookmarkClipper.js?'+(new%20Date().getTime()/100000);document.getElementsByTagName('head')[0].appendChild(x);}catch(e){location.href=EN_CLIP_HOST+'/clip.action?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title);}})();" ref="nofollow" target="_blank"></a></span><span class="soc"><a class="fa fa-weibo" href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));"></a></span><span class="soc"><a class="fa fa-twitter" target="_blank" rel="noopener" href="http://twitter.com/home?status=https://shemol.tech/2024/04/17/容器技术和虚拟化技术的区别/%20Shemol's Blog%20容器技术和虚拟化技术的区别"></a></span></div><div class="pagination"><p class="clearfix"><span class="pre pagbuttons"><a role="navigation" href="/2024/04/21/ACM%20SIGCOMM%202023%20List%20of%20Accepted%20Papers/" title="ACM SIGCOMM 2023 List of Accepted Papers"><i class="fa fa-angle-double-left"></i>&nbsp;Previous post: ACM SIGCOMM 2023 List of Accepted Papers</a></span><span>&nbsp;</span><span class="next pagbuttons"><a role="navigation" href="/2024/04/16/A%20Multipath%20Extension%20to%20the%20QUIC%20Module%20for%20ns-3/" title="A Multipath Extension to the QUIC Module for ns-3">Next post: A Multipath Extension to the QUIC Module for ns-3&nbsp;<i class="fa fa-angle-double-right"></i></a></span></p></div></div></div></div><div class="visible-xs site-bottom-footer"><footer><p>&copy;&nbsp;2024&nbsp;<a target="_blank" href="https://shemol.tech" rel="noopener noreferrer">Shemol</a></p><p>Theme&nbsp;<a target="_blank" href="https://github.com/SumiMakito/hexo-theme-typography" rel="noopener noreferrer">Typography</a>&nbsp;by&nbsp;<a target="_blank" href="https://www.keep.moe" rel="noopener noreferrer">Makito</a></p><p>Proudly published with&nbsp;<a target="_blank" href="https://hexo.io" rel="noopener noreferrer">Hexo</a></p></footer></div></div></div></div><script src="/js/jquery-3.1.0.min.js"></script><script src="/js/bootstrap.min.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script><script src="/js/google-analytics.js"></script><script src="/js/typography.js"></script></body></html>